<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Daniel Standage</title>
	<meta name="description" content="">
	<meta name="author" content="Daniel S. Standage">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="https://standage.github.io/theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="https://standage.github.io/theme/bootstrap.min.css" rel="stylesheet">
	<link href="https://standage.github.io/theme/local.css" rel="stylesheet">
	<link href="https://standage.github.io/theme/pygments.css" rel="stylesheet">

	<!-- Feeds -->
	<link href="https://standage.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Daniel Standage Atom Feed" />


	<link href="https://standage.github.io/feed.xml" type="application/rss+xml" rel="alternate" title="Daniel Standage RSS Feed" />


<script type="text/javascript">
	var disqus_identifier = "building-a-decision-tree-chart-with-graphviz.html";
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'https://standage-github-io.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
</head>
<body>
	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="https://standage.github.io/">Daniel Standage</a>
			<ul class="nav">
						<li><a href="https://standage.github.io/pages/cv.html">CV</a></li>
						<li><a href="https://standage.github.io/pages/teaching.html">Teaching</a></li>
						<li><a href="https://standage.github.io/pages/software.html">Software</a></li>
				<li><a href="https://standage.github.io/notebook.html">Notebook</a></li>
			</ul>
			<p class="pull-right"><a href="https://standage.github.io/archives.html">[archives]</a> <a href="https://standage.github.io/categories.html">[categories]</a> <a href="https://standage.github.io/tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<img src="https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?size=180" alt="Daniel Standage" />
			<h3>Daniel S. Standage</h3>
			<p>
				University of California, Davis<br />
				Population Health and Reproduction<br />
				1 Shields Ave<br />
				Davis, CA 95616<br />
			</p>
			<h3>Affiliations</h3>
			<ul>
				<li><a href="http://ivory.idyll.org/lab/">Lab for Data Intensive Biology</a></li>
				<li><a href="http://brendelgroup.org/">Brendel Group</a></li>
				<li><a href="http://www.public.iastate.edu/~amytoth/Toth_lab/Home.html">Toth Lab</a></li>
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				<li><a href="http://github.com/standage">GitHub</a></li>
				<li><a href="https://twitter.com/byuhobbes">Twitter</a></li>
				<li><a href="http://stackexchange.com/users/208980/daniel-standage?tab=accounts">StackExchange</a></li>
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
	<div class='article'>
		<div class="page-header"><h1>Building a decision tree chart with graphviz</h1></div>
		<div class="well small">Permalink: <a class="more" href="https://standage.github.io/building-a-decision-tree-chart-with-graphviz.html">2016-01-25</a>
by <a class="url fn" href="https://standage.github.io/author/daniel-s-standage.html">Daniel S. Standage </a>
 in <a href="https://standage.github.io/category/blog.html">blog</a>
tags: <a href="https://standage.github.io/tag/visualization.html">visualization</a> <a href="https://standage.github.io/tag/graphviz.html">graphviz</a> </div>
		<div><p>I'm preparing a manuscript, and I sketched out the following chart I would like to include.</p>
<p><img src="https://standage.github.io/images/ilocus-decision-tree.jpg" alt="Chart" style="width: 450px" /></p>
<p>With my rudimentary <a href="http://www.graphviz.org/">graphviz</a> experience, I threw together the following representation.</p>
<div class="highlight"><pre><span></span>digraph
{
    ilocus [label=&quot;iLocus&quot;]
    gilocus [label=&quot;giLocus&quot;]
    pilocus [label=&quot;piLocus&quot;]
    nilocus [label=&quot;niLocus&quot;]
    silocus [label=&quot;siLocus&quot;]
    cilocus [label=&quot;ciLocus&quot;]
    filocus [label=&quot;fiLocus&quot;]
    iilocus [label=&quot;iiLocus&quot;]

    containgene [label=&quot;Contains gene(s)?&quot;]
    proteincoding [label=&quot;Protein coding?&quot;]
    multiplegenes [label=&quot;Multiple genes?&quot;]
    geneflank [label=&quot;Flanked by genes on both sides?&quot;]

    ilocus -&gt; containgene
    containgene -&gt; geneflank [label=&quot;No&quot;]
    geneflank -&gt; filocus [label=&quot;No&quot;]
    geneflank -&gt; iilocus [label=&quot;Yes&quot;]
    containgene -&gt; gilocus [label=&quot;Yes&quot;]
    gilocus -&gt; proteincoding
    proteincoding -&gt; nilocus [label=&quot;No&quot;]
    proteincoding -&gt; pilocus [label=&quot;Yes&quot;]
    pilocus -&gt; multiplegenes
    multiplegenes -&gt; silocus [label=&quot;No&quot;]
    multiplegenes -&gt; cilocus [label=&quot;Yes&quot;]
}
</pre></div>


<p>Saved as <code>take1.dot</code> and rendered with the command <code>dot -Tpng -o take1.png take.dot</code>, we get this.</p>
<p><img alt="Chart, take 1" src="https://standage.github.io/images/take1.png" /></p>
<p>It's not bad for a first pass, but let's adjust the style a bit to distinguish between iLocus designations and branching logic.</p>
<div class="highlight"><pre><span></span>digraph
{
    node [color=Limegreen,fontcolor=Limegreen,shape=oval]
    ilocus [label=&quot;iLocus&quot;]
    gilocus [label=&quot;giLocus&quot;]
    pilocus [label=&quot;piLocus&quot;]
    nilocus [label=&quot;niLocus&quot;]
    silocus [label=&quot;siLocus&quot;]
    cilocus [label=&quot;ciLocus&quot;]
    filocus [label=&quot;fiLocus&quot;]
    iilocus [label=&quot;iiLocus&quot;]

    node [color=Blue,fontcolor=Blue,shape=diamond]
    containgene [label=&quot;Contains gene(s)?&quot;]
    proteincoding [label=&quot;Protein coding?&quot;]
    multiplegenes [label=&quot;Multiple genes?&quot;]
    geneflank [label=&quot;Flanked by genes\non both sides?&quot;]

    ilocus -&gt; containgene
    containgene -&gt; geneflank [label=&quot;No&quot;]
    geneflank -&gt; filocus [label=&quot;No&quot;]
    geneflank -&gt; iilocus [label=&quot;Yes&quot;]
    containgene -&gt; gilocus [label=&quot;Yes&quot;]
    gilocus -&gt; proteincoding
    proteincoding -&gt; nilocus [label=&quot;No&quot;]
    proteincoding -&gt; pilocus [label=&quot;Yes&quot;]
    pilocus -&gt; multiplegenes
    multiplegenes -&gt; silocus [label=&quot;No&quot;]
    multiplegenes -&gt; cilocus [label=&quot;Yes&quot;]
}
</pre></div>


<p>That gives us the following.</p>
<p><img alt="Chart, take 2" src="https://standage.github.io/images/take2.png" /></p>
<p>Now, let's see if we can get the <code>giLocus</code> and <code>piLocus</code> nodes on the same level as in the sketch, using <code>rank=same</code>.</p>
<div class="highlight"><pre><span></span>digraph
{
    node [color=Limegreen,fontcolor=Limegreen,shape=oval]
    ilocus [label=&quot;iLocus&quot;]
    gilocus [label=&quot;giLocus&quot;]
    pilocus [label=&quot;piLocus&quot;]
    nilocus [label=&quot;niLocus&quot;]
    silocus [label=&quot;siLocus&quot;]
    cilocus [label=&quot;ciLocus&quot;]
    filocus [label=&quot;fiLocus&quot;]
    iilocus [label=&quot;iiLocus&quot;]

    node [color=Blue,fontcolor=Blue,shape=diamond]
    containgene [label=&quot;Contains gene(s)?&quot;]
    proteincoding [label=&quot;Protein coding?&quot;]
    multiplegenes [label=&quot;Multiple genes?&quot;]
    geneflank [label=&quot;Flanked by genes\non both sides?&quot;]

    {rank = same; containgene; gilocus}
    {rank = same; proteincoding; pilocus}

    ilocus -&gt; containgene
    containgene -&gt; geneflank [label=&quot;No&quot;]
    geneflank -&gt; filocus [label=&quot;No&quot;]
    geneflank -&gt; iilocus [label=&quot;Yes&quot;]
    containgene -&gt; gilocus [label=&quot;Yes&quot;]
    gilocus -&gt; proteincoding
    proteincoding -&gt; nilocus [label=&quot;No&quot;]
    proteincoding -&gt; pilocus [label=&quot;Yes&quot;]
    pilocus -&gt; multiplegenes
    multiplegenes -&gt; silocus [label=&quot;No&quot;]
    multiplegenes -&gt; cilocus [label=&quot;Yes&quot;]
}
</pre></div>


<p>That gives us the following.</p>
<p><img alt="Chart, take 3" src="https://standage.github.io/images/take3.png" /></p>
<p>Getting there!
Now, let's use the <code>compass_pt</code> feature to specify which side of the diamonds we want the arrows to come from.</p>
<div class="highlight"><pre><span></span>digraph
{
    node [color=Limegreen,fontcolor=Limegreen,shape=oval]
    ilocus [label=&quot;iLocus&quot;]
    gilocus [label=&quot;giLocus&quot;]
    pilocus [label=&quot;piLocus&quot;]
    nilocus [label=&quot;niLocus&quot;]
    silocus [label=&quot;siLocus&quot;]
    cilocus [label=&quot;ciLocus&quot;]
    filocus [label=&quot;fiLocus&quot;]
    iilocus [label=&quot;iiLocus&quot;]

    node [color=Blue,fontcolor=Blue,shape=diamond]
    containgene [label=&quot;Contains gene(s)?&quot;]
    proteincoding [label=&quot;Protein coding?&quot;]
    multiplegenes [label=&quot;Multiple genes?&quot;]
    geneflank [label=&quot;Flanked by genes\non both sides?&quot;]

    {rank = same; containgene; gilocus}
    {rank = same; proteincoding; pilocus}

    ilocus -&gt; containgene
    containgene:w -&gt; geneflank [label=&quot;No&quot;]
    geneflank:e -&gt; filocus [label=&quot;No&quot;]
    geneflank:w -&gt; iilocus [label=&quot;Yes&quot;]
    containgene:e -&gt; gilocus [label=&quot;Yes&quot;]
    gilocus -&gt; proteincoding
    proteincoding:w -&gt; nilocus [label=&quot;No&quot;]
    proteincoding:e -&gt; pilocus [label=&quot;Yes&quot;]
    pilocus -&gt; multiplegenes
    multiplegenes:e -&gt; silocus [label=&quot;No&quot;]
    multiplegenes:w -&gt; cilocus [label=&quot;Yes&quot;]
}
</pre></div>


<p>We end up with this.</p>
<p><img alt="Chart, take 4" src="https://standage.github.io/images/take4.png" /></p>
<p>Everything looks good here except for the edges.
Is there any way we can force straight edges with corners, like in the sketch, rather than the curved edges?
The <code>splines=ortho</code> setting seems to be designed just for that.
Let's try it out (also requires setting edge labels to <code>xlabel</code>).</p>
<div class="highlight"><pre><span></span>digraph
{
    graph [splines=ortho]

    node [color=Limegreen,fontcolor=Limegreen,shape=oval]
    ilocus [label=&quot;iLocus&quot;]
    gilocus [label=&quot;giLocus&quot;]
    pilocus [label=&quot;piLocus&quot;]
    nilocus [label=&quot;niLocus&quot;]
    silocus [label=&quot;siLocus&quot;]
    cilocus [label=&quot;ciLocus&quot;]
    filocus [label=&quot;fiLocus&quot;]
    iilocus [label=&quot;iiLocus&quot;]

    node [color=Blue,fontcolor=Blue,shape=diamond]
    containgene [label=&quot;Contains gene(s)?&quot;]
    proteincoding [label=&quot;Protein coding?&quot;]
    multiplegenes [label=&quot;Multiple genes?&quot;]
    geneflank [label=&quot;Flanked by genes\non both sides?&quot;]

    {rank = same; containgene; gilocus}
    {rank = same; proteincoding; pilocus}

    ilocus -&gt; containgene
    containgene:w -&gt; geneflank [xlabel=&quot;No&quot;]
    geneflank:e -&gt; filocus [xlabel=&quot;No&quot;]
    geneflank:w -&gt; iilocus [xlabel=&quot;Yes&quot;]
    containgene:e -&gt; gilocus [xlabel=&quot;Yes&quot;]
    gilocus -&gt; proteincoding
    proteincoding:w -&gt; nilocus [xlabel=&quot;No&quot;]
    proteincoding:e -&gt; pilocus [xlabel=&quot;Yes&quot;]
    pilocus -&gt; multiplegenes
    multiplegenes:e -&gt; silocus [xlabel=&quot;No&quot;]
    multiplegenes:w -&gt; cilocus [xlabel=&quot;Yes&quot;]
}
</pre></div>


<p>Which gives us this.</p>
<p><img alt="Chart, take 5" src="https://standage.github.io/images/take5.png" /></p>
<p>Whoa, definitely not what I had in mind.
I haven't been able to figure this last step out.
If I can't figure out how to force straight edges with corners, then I think I'll have to go with "take 3" above, the last figure before the <code>compass_pt</code> feature was used.</p></div>
		<div>
			<h2>Comments</h2>
<div id="disqus_thread"></div>		<div>
	</div>
		<footer>
		  <p>
			<a href="http://creativecommons.org/licenses/by/4.0/"><img src="https://standage.github.io/images/cc-by-88x31.png" alt="CC BY 4.0" /></a><br />
		    &copy; 2015-2016 Daniel S. Standage.<br />
			Unless otherwise noted, all content on this site is posted under a <a href="http://creativecommons.org/licenses/by/4.0/">CC BY license</a>.</p>
		  <p></p>
		  <p>This site is powered by <a href="http://getpelican.com/">Pelican</a>, its theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		</footer>
	  </div>

	</div>
</body>
</html>